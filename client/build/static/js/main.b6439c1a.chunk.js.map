{"version":3,"sources":["axios.js","store/actions/actions.js","store/actions/actionTypes.js","containers/Header/Header.js","components/UI/Input/Input.js","containers/Auth/form.js","containers/Auth/Auth.js","components/Conversation/ChatString/ChatString.js","components/Conversation/ChatSubmit/ChatSubmit.js","containers/Chat/Chat.js","App.js","store/reducer.js","index.js","components/UI/Input/Input.module.css","containers/Chat/Chat.module.css","containers/Auth/Auth.module.css","containers/Header/Header.module.css","components/Conversation/ChatString/ChatString.module.css","img/header.svg","components/Conversation/ChatSubmit/chatSubmit.module.css"],"names":["instance","axios","create","headers","post","baseURL","removeUser","id","dispatch","get","userId","then","response","type","userRemoved","catch","err","console","log","newMsg","data","authenticated","token","user","exp","socket","localStorage","setItem","JSON","stringify","setUser","on","addUser","getUsers","Authorization","logoutUser","removeItem","Header","nav","this","props","className","classes","Nav","recipient","onClick","onUnsetRecipient","name","onLogoutUser","_id","src","HeaderImg","Component","connect","state","actions","input","inputElement","inputClasses","InputElement","labelClasses","Label","invalid","shouldValidate","touched","push","Invalid","LabelInvalid","elementType","join","elementConfig","value","onChange","changed","options","map","option","key","displayValue","Input","placeholder","authForm","email","validation","required","valid","password","Auth","formError","isLogin","inputChangedHandler","event","inputIdentifier","updatedAuthForm","target","checkValidity","setState","submitHandler","preventDefault","onAuthenticated","onGetUsers","error","dir","switchFormHandler","prevState","nextForm","rules","isValid","trim","minLength","length","formElementsArray","config","form","formElement","authRedirect","isAuthenticated","to","errorMsg","FormArea","onSubmit","Submit","style","fontSize","chatString","stringStyle","String","children","chatSubmit","React","forwardRef","ref","val","change","send","Chat","currentMsg","scrollToPosition","_chatWindow","scrollTop","scrollHeight","startChatHandler","msg","_input","focus","emit","onNewMsg","currentMsgHandler","identifier","prevProps","messages","sort","a","b","timestamp","ChatString","chatWindow","ChatSubmit","userList","Object","entries","onlineUsers","filter","onSetRecipient","Unread","Main","chat","UserList","App","logoutRequest","onRemoveUser","socketIOClient","onSetSocket","getItem","Date","getTime","parse","window","addEventListener","path","component","withRouter","initialState","action","updatedUsers","newMessage","now","uuidv4","updatedMessages","thread","currentUser","storeUsers","unsetRecipient","setRecipient","setSocket","reducer","composeEnhancers","store","createStore","applyMiddleware","thunk","app","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.b6439c1a.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst instance = axios.create({\n  headers: {\n    post: { \n      'Access-Control-Allow-Origin': '*'\n    }\n  },\n  baseURL: 'http://127.0.0.1:4001/'\n});\n\nexport default instance;\n","import * as actionTypes from './actionTypes';\nimport axios from '../../axios';\n\nconst setUser = (token, user, exp) => {\n  return { type: actionTypes.SET_USER, token, user, exp }\n}\n\nconst userJoin = (user) => {\n  return { type: actionTypes.ADD_USER, user }\n}\n\nconst addUser = id => {\n  return dispatch => {\n    axios.get('/user/' + id.userId).then(response => {\n      dispatch(userJoin(response.data));\n    }).catch(err => console.log(err));\n  }\n}\n\nexport const setSocket = (socket) => {\n  return { type: actionTypes.SET_SOCKET, socket }\n}\n\nconst userRemoved = (id) => {\n  return { type: actionTypes.REMOVE_USER, id }\n}\n\nexport const removeUser = (id) => {\n  return dispatch => {\n    axios.get('/useroffline/' + id.userId).then(response => {\n      dispatch(userRemoved(id.userId));\n    }).catch(err => console.log(err));\n  }\n\n  return { type: actionTypes.REMOVE_USER, id }\n}\n\nconst storeUsers = (data) => {\n  return { type: actionTypes.STORE_USERS, data }\n}\n\nexport const newMsg = (data) => {\n  return { type: actionTypes.NEW_MSG, data }\n}\n\nexport const authenticated = (token, user, exp, socket) => {\n\n  localStorage.setItem('token', token);\n  localStorage.setItem('user', JSON.stringify(user));\n  localStorage.setItem('exp', exp);\n\n  return dispatch => {\n    dispatch(setUser(token, user, exp));\n    socket.on(\"new_msg\", data => {\n      dispatch(newMsg(data));\n    });\n    socket.on('emitOn', id => dispatch(addUser(id)));\n    socket.on('emitOff', id => dispatch(removeUser(id)));\n  }\n}\n\nexport const getUsers = (token) => {\n  return dispatch => {\n    axios.get('/users', {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    }).then(response => {\n      dispatch(storeUsers(response.data));\n    }).catch(err => console.log(err));\n  }\n}\n\nexport const setRecipient = (recipient, socket) => {\n  return { type: actionTypes.SET_RECIPIENT, recipient}\n}\n\nexport const unsetRecipient = (recipient, socket) => {\n  return { type: actionTypes.UNSET_RECIPIENT }\n}\n\nexport const logoutUser = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('user');\n  localStorage.removeItem('exp');\n\n  return {\n    type: actionTypes.LOGOUT_USER\n  }\n}\n","export const SET_USER = 'SET_USER';\nexport const ADD_USER = 'ADD_USER';\nexport const REMOVE_USER = 'REMOVE_USER';\nexport const NEW_MSG = 'NEW_MSG';\nexport const LOGOUT_USER = 'LOGOUT_USER';\nexport const STORE_USERS = 'STORE_USERS';\nexport const SET_RECIPIENT = 'SET_RECIPIENT';\nexport const UNSET_RECIPIENT = 'UNSET_RECIPIENT';\nexport const SET_SOCKET = 'SET_SOCKET';\n","import React, {Component} from 'react';\nimport * as actions from '../../store/actions/actions';\nimport { connect } from 'react-redux';\n\nimport HeaderImg from '../../img/header.svg';\nimport classes from './Header.module.css';\n\nclass Header extends Component {\n  render(){\n    let nav = null;\n    if(this.props.user){\n      nav = (\n        <div className={classes.Nav}>\n          { this.props.recipient?.[0] ?\n            <p onClick={this.props.onUnsetRecipient}>back</p>:\n            null\n          }\n          <p>{this.props.recipient?.[1]?.name}</p>\n          <p onClick={() => this.props.onLogoutUser(this.props.user?._id)}>Logga ut</p>\n        </div>\n      );\n    }\n    return (\n      <div className={classes.Header}>\n        <img src={HeaderImg} />\n        {nav}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    recipient: state.recipient\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onUnsetRecipient: () => dispatch(actions.unsetRecipient()),\n    onLogoutUser: (id) => dispatch(actions.logoutUser(id))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\n","import React from  'react';\nimport classes from './Input.module.css';\n\nconst input = (props) => {\n\n  let inputElement = null;\n  const  inputClasses = [classes.InputElement];\n  const labelClasses = [classes.Label];\n\n  if(props.invalid && props.shouldValidate && props.touched){\n    inputClasses.push(classes.Invalid);\n    labelClasses.push(classes.LabelInvalid);\n  }\n\n  switch (props.elementType){\n    case('input'):\n      inputElement = <input\n        className={inputClasses.join(' ')}\n        {...props.elementConfig}\n        value={props.value}\n        onChange={props.changed}/>;\n      break;\n    case('textarea'):\n      inputElement = <textarea\n        className={inputClasses.join(' ')}\n        {...props.elementConfig}\n        value={props.value}\n        onChange={props.changed}/>;\n      break;\n    case('select'):\n        inputElement = (\n          <select\n            className={inputClasses.join(' ')}\n            value={props.value}\n            onChange={props.changed}>\n            {props.elementConfig.options.map(option => (\n              <option\n                key={option.value}\n                value={option.value}>{option.displayValue}\n                </option>\n            ))}\n\n          </select>\n        )\n      break;\n    default:\n      inputElement = <input\n        className={classes.InputElement}\n        {...props.elementConfig}\n        value={props.value}/>;\n  }\n\n  return (\n    <div className={classes.Input}>\n      <label className={labelClasses.join(' ')}>{props.elementConfig.placeholder}</label>\n      {inputElement}\n    </div>\n  );\n}\n\nexport default input;\n","const authForm = {\n  email: {\n    elementType: 'input',\n    elementConfig: {\n      type: 'email',\n      placeholder: 'Your Email'\n    },\n    value: '',\n    validation: {\n      required: true,\n    },\n    valid: false,\n    touched: false\n  },\n  password: {\n    elementType: 'input',\n    elementConfig: {\n      type: 'password',\n      placeholder: 'password'\n    },\n    value: '',\n    validation: {\n      required: true,\n    },\n    valid: false,\n    touched: false\n  }\n};\n\nexport default authForm;\n","import React, {Component} from 'react';\nimport axios from '../../axios';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport * as actions from '../../store/actions/actions';\nimport socketIOClient from \"socket.io-client\";\nimport Input from '../../components/UI/Input/Input';\nimport authForm from './form';\nimport classes from './Auth.module.css';\n\nclass Auth extends Component {\n  state = {\n    authForm: authForm,\n    formError: null,\n    isLogin: true\n  }\n\n  checkValidity(value, rules){\n    let isValid = true;\n\n    if(rules.required){ isValid = value.trim() !== '' && isValid; }\n    if(rules.minLength){ isValid = value.length >= rules.minLength && isValid; }\n\n    return isValid;\n  }\n\n  inputChangedHandler = (event, inputIdentifier) => {\n\n    const updatedAuthForm = {\n      ...this.state.authForm,\n      [inputIdentifier]: {\n        ...this.state.authForm[inputIdentifier],\n        value: event.target.value,\n        valid: this.checkValidity(event.target.value, this.state.authForm[inputIdentifier].validation),\n        touched: true\n      }\n    };\n\n    this.setState({authForm: updatedAuthForm});\n  }\n\n  submitHandler = (event) => {\n    event.preventDefault();\n\n    const data = {\n      email: this.state.authForm.email.value,\n      password: this.state.authForm.password.value\n    }\n\n    if(this.state.isLogin){\n      axios.post('/login', data)\n        .then(response => {\n\n          this.props.onAuthenticated(response.data.token, response.data.user, response.data.exp, this.props.socket);\n\n          axios.get('/useronline/' + response.data.user._id, {\n            headers: {\n              Authorization: 'Bearer ' + response.data.token\n            }\n          }).then(response => {\n            console.log('resp', response.data);\n          }).catch(err => console.log(err)\n          );\n\n          this.props.onGetUsers(response.data.token);\n\n        })\n        .catch(error => {\n          console.dir('error', error);\n          this.setState({ formError: error.response.data })\n        });\n    }else{\n      data['name'] = this.state.authForm.name.value\n      axios.post('/register', data)\n        .then(response => {\n          this.setState({ isLogin: true })\n        })\n        .catch(error => {\n          console.dir(error)\n          this.setState({ formError: error.response.data })\n        });\n    }\n\n  }\n\n  switchFormHandler = () => {\n\n    this.setState(prevState => {\n      let nextForm = {};\n      if(prevState.isLogin){\n        nextForm = {\n          name: {\n            elementType: 'input',\n            elementConfig: {\n              type: 'name',\n              placeholder: 'Your Name'\n            },\n          value: '',\n          validation: {\n            required: true,\n          },\n          valid: false,\n          touched: false\n        }, ...this.state.authForm\n      };\n      }else{\n        nextForm = {...this.state.authForm};\n        delete nextForm.name;\n      }\n      return {isLogin: !prevState.isLogin, authForm: nextForm}\n    })\n  }\n\n  render(){\n\n    const formElementsArray = [];\n    for(let key in this.state.authForm){\n      formElementsArray.push({\n        id: key,\n        config: this.state.authForm[key]\n      });\n    }\n\n    let formError = null;\n\n    let form = formElementsArray.map(formElement => (\n      <Input\n        key={formElement.id}\n        elementType={formElement.config.elementType}\n        elementConfig={formElement.config.elementConfig}\n        value={formElement.config.value}\n        invalid={!formElement.config.valid}\n        shouldValidate={formElement.config.validation}\n        touched={formElement.config.touched}\n        changed={(event) => this.inputChangedHandler(event, formElement.id)} />\n    ));\n\n    let authRedirect = null;\n    if(this.props.isAuthenticated){\n      authRedirect = <Redirect to=\"/\" />\n    }\n\n    let errorMsg = null;\n    if(this.state.formError){\n      errorMsg = <p>{this.state.formError}</p>\n    }\n\n    return (\n      <div className={classes.Auth}>\n        { authRedirect }\n        <div className={classes.FormArea}>\n          { errorMsg }\n          <form onSubmit={this.submitHandler}>\n            { this.props.isAuthenticated ? null : form }\n            <button className={classes.Submit} type=\"submit\">{this.state.isLogin ? 'Login' : 'Signup'}</button>\n          </form>\n          <p onClick={this.switchFormHandler} style={{fontSize: '12px'}}>{this.state.isLogin ? 'Switch to sign up' : 'Switch to login'}</p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.token !== null,\n    socket: state.socket\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onAuthenticated: (token, user, exp, socket) => dispatch(actions.authenticated(token, user, exp, socket)),\n    onGetUsers: (token) => dispatch(actions.getUsers(token))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth);\n","import React from  'react';\nimport classes from './ChatString.module.css';\n\nconst chatString = (props) => {\n  console.log('chatString', props);\n  const stringStyle = classes[props.stringStyle]\n  return (\n    <div className={stringStyle + ' ' + classes.String}>\n      <p>{props.children}</p>\n    </div>\n  );\n}\n\nexport default chatString;\n","import React from  'react';\nimport classes from './chatSubmit.module.css';\n\nconst chatSubmit = React.forwardRef((props, ref) => {\n  console.log(ref);\n  const clicked = () => {\n    console.log(ref);\n  }\n  return (\n    <div className={classes.Submit}>\n        <input\n          ref={ref}\n          type=\"text\"\n          value={props.val}\n          onChange={props.change}></input>\n        <button\n          onClick={props.send}>send msg</button>\n\n    </div>\n\n  );\n});\n\nexport default chatSubmit;\n","import React, {Component} from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport * as actions from '../../store/actions/actions';\nimport UserList from '../../components/UserList/UserList';\nimport ChatString from '../../components/Conversation/ChatString/ChatString';\nimport ChatSubmit from '../../components/Conversation/ChatSubmit/ChatSubmit';\nimport classes from './Chat.module.css';\n\nclass Chat extends Component {\n\n  state = {\n    currentMsg: {}\n  }\n\n  componentDidMount() {\n    this.scrollToPosition();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.messages !== this.props.messages) {\n      this.scrollToPosition();\n    }\n  }\n\n  scrollToPosition = () => {\n    if(this._chatWindow){\n      this._chatWindow.scrollTop = this._chatWindow?.scrollHeight;\n    }\n  }\n\n  startChatHandler = (msg, user, recipient) => {\n    this._input.focus();\n\n    const currentMsg = {...this.state.currentMsg};\n    currentMsg[recipient] = '';\n    this.setState({ currentMsg: currentMsg });\n\n    this.props.socket.emit('chat', { msg, user, recipient });\n    this.props.onNewMsg({ msg, user, recipient });\n  }\n\n  currentMsgHandler = (event, identifier) => {\n    const currentMsg = {...this.state.currentMsg};\n    currentMsg[identifier] = event.target.value;\n    this.setState({ currentMsg: currentMsg });\n  }\n\n  render(){\n    let authRedirect = null;\n    if(!this.props.isAuthenticated){\n      authRedirect = <Redirect to=\"/auth\" />\n    }\n\n    let messages = this.props.messages?.[this.props.recipient?.[0]];\n    if(messages){\n      messages = messages\n      .sort((a,b) => a.timestamp - b.timestamp )\n      .map(msg => {\n        let style = null;\n        if(msg.user === this.props.user?._id){\n          style = 'Right';\n        }else{\n          style = 'Left';\n        }\n        return <ChatString key={msg.id} stringStyle={style}>{msg.msg}</ChatString>;\n      });\n    }\n\n    let chatWindow = null;\n    if(this.props.recipient?.[0]){\n      chatWindow = (\n        <div>\n          { messages }\n          <div></div>\n          <ChatSubmit\n            send={ () => this.startChatHandler(\n                this.state.currentMsg?.[this.props.recipient?.[0]],\n                this.props.user._id, this.props.recipient?.[0] )}\n            val={ this.state.currentMsg?.[this.props.recipient?.[0]] ?\n              this.state.currentMsg?.[this.props.recipient?.[0]] :\n              ''}\n            change={(event) => this.currentMsgHandler(event, this.props.recipient?.[0])}\n            ref={(input) => this._input = input}\n            />\n        </div>\n      );\n    }\n\n    let userList = <li>No users currently online...</li>;\n    if(Object.entries(this.props.onlineUsers).length > 1){\n      userList = Object.entries(this.props.onlineUsers)\n      .filter(user => user[0] !== this.props.user?._id)\n      .map(user => {\n        let style = null;\n        if(user[0] === this.props.recipient?.[0]){\n          style = {'fontWeight': 'bold'};\n        }\n        return (\n          <li key={user[0]} style={style} onClick={() => this.props.onSetRecipient(user, this.props.socket)}>\n            {user[1]['name']}\n            {\n              user[1]['unread'] ?\n              <span className={classes.Unread}>{user[1]['unread']}</span>  :\n              null\n            }</li>\n        );\n      })\n    }\n\n    return (\n      <div className={classes.Chat}>\n      { authRedirect }\n      { !this.props.recipient ?\n        <div className={classes.UserList}>\n          <ul>{ userList }</ul>\n        </div> :\n        <div\n          className={classes.Main}\n          ref={(chat) => this._chatWindow = chat}>\n          { chatWindow }\n        </div>\n      }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.token !== null,\n    token: state.token,\n    socket: state.socket,\n    user: state.user,\n    onlineUsers: state.onlineUsers,\n    recipient: state.recipient,\n    messages: state.messages\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onLogoutUser: (id) => dispatch(actions.logoutUser(id)),\n    onGetUsers: (token) => dispatch(actions.getUsers(token)),\n    onSetRecipient: (recipient, socket) => dispatch(actions.setRecipient(recipient, socket)),\n    onNewMsg: (data) => dispatch(actions.newMsg(data))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);\n","import React, {Component} from 'react';\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport * as actions from './store/actions/actions';\nimport socketIOClient from \"socket.io-client\";\nimport axios from './axios';\n\nimport './assets/style/style.css';\n\nimport Header from './containers/Header/Header';\nimport Auth from './containers/Auth/Auth';\nimport Chat from './containers/Chat/Chat';\n\nclass App extends Component {\n\n  componentWillMount(){\n    const socket = socketIOClient('http://127.0.0.1:4001');\n    this.props.onSetSocket(socket);\n\n    const token = localStorage.getItem('token');\n\n    if(token){\n      const exp = localStorage.getItem('exp');\n      if(exp > (new Date().getTime() / 1000)){\n        const user = JSON.parse(localStorage.getItem('user'));\n        this.props.onAuthenticated(token, user, exp, socket);\n\n        axios.get('/useronline/' + user._id, {\n          headers: {\n            Authorization: 'Bearer ' + token\n          }\n        }).then(response => {\n          console.log(response.data);\n        }).catch(err => console.log(err));\n\n        this.props.onGetUsers(token);\n      }\n    }\n\n    window.addEventListener('beforeunload', () => this.logoutRequest(this.props.user?._id, this.props.token));\n  }\n\n  logoutRequest = (user, token) => {\n    if(user && token){\n      this.props.onRemoveUser(user, token);\n    }\n  }\n\n  render(){\n    return (\n      <div className='App'>\n        <Header />\n        <Switch>\n          <Route path=\"/auth\" component={Auth} />\n          <Route path=\"/\" component={Chat} />\n          <Redirect to=\"/\" />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state  => {\n  return {\n    isAuthenticated: state.token !== null,\n    user: state.user,\n    token: state.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return{\n    onRemoveUser: (id, token) => dispatch(actions.removeUser({userId: id}, token)),\n    onSetSocket: (socket) =>  dispatch(actions.setSocket(socket)),\n    onAuthenticated: (token, user, exp, socket) => dispatch(actions.authenticated(token, user, exp, socket)),\n    onGetUsers: (token) => dispatch(actions.getUsers(token)),\n  };\n}\n\nexport default withRouter(connect(mapStateToProps,mapDispatchToProps)(App));\n","import * as actionTypes from './actions/actionTypes';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst initialState = {\n  token: null,\n  user: null,\n  recipient: null,\n  socket: null,\n  onlineUsers: {},\n  messages: {}\n}\n\nconst setUser = (state, action) => {\n  state.socket.emit('join', {\n    name: action.user.name,\n    id: action.user._id\n  });\n\n  return {\n    ...state,\n    token: action.token,\n    user: action.user\n  };\n}\n\nconst addUser = (state, action) => {\n  const updatedUsers = {...state.onlineUsers, ...action.user}\n  return {\n    ...state,\n    onlineUsers: updatedUsers\n  };\n}\n\nconst removeUser = (state, action) => {\n  const onlineUsers = {...state.onlineUsers};\n  delete onlineUsers[action.id];\n  return {\n    ...state,\n    onlineUsers: onlineUsers\n  };\n}\n\nconst newMsg = (state, action) => {\n  const { msg, user, recipient } = action.data;\n  const userId = state.user._id;\n  const timestamp = Date.now();\n  const newMessage = { timestamp, user, msg, id: uuidv4() };\n  const updatedMessages = {...state.messages};\n  const updatedUsers = {...state.onlineUsers};\n\n  let thread = null;\n\n  if(userId === user){\n    thread = recipient;\n  }else{\n    thread = user;\n    if(user !== state.recipient?.[0]){\n      const currentUser = {...state.onlineUsers[user]};\n      currentUser['unread'] ?\n      currentUser['unread']++ :\n      currentUser['unread'] = 1;\n\n      updatedUsers[user] = currentUser;\n    }\n    console.log('[user]', updatedUsers);\n  }\n\n  state.messages[thread] ?\n  updatedMessages[thread] = [...state.messages[thread], newMessage] :\n  updatedMessages[thread] = [newMessage];\n\n  return {\n    ...state,\n    messages: updatedMessages,\n    onlineUsers: updatedUsers\n  };\n}\n\nconst logoutUser = (state, action) => {\n  state.socket.emit('leaveChat', state.user._id);\n  return {\n    ...state,\n    token: null,\n    user: null,\n    recipient: null,\n  };\n}\n\nconst storeUsers = (state, action) => {\n  return {\n    ...state,\n    onlineUsers: action.data\n  }\n}\n\nconst unsetRecipient = (state, action) => {\n  return {\n    ...state,\n    recipient: null\n  }\n}\n\nconst setRecipient = (state, action) => {\n  const updatedUsers = {...state.onlineUsers};\n  const currentUser = {...state.onlineUsers[action.recipient[0]]};\n\n  currentUser['unread'] = false;\n  updatedUsers[action.recipient[0]] = currentUser;\n\n  console.log(currentUser);\n\n  return {\n    ...state,\n    recipient: action.recipient,\n    onlineUsers: updatedUsers\n  }\n}\n\nconst setSocket = (state, action) => {\n  return {\n    ...state,\n    socket: action.socket\n  }\n}\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type){\n    case actionTypes.STORE_USERS: return storeUsers(state, action);\n    case actionTypes.SET_USER: return setUser(state, action);\n    case actionTypes.ADD_USER: return addUser(state, action);\n    case actionTypes.REMOVE_USER: return removeUser(state, action);\n    case actionTypes.NEW_MSG: return newMsg(state, action);\n    case actionTypes.LOGOUT_USER: return logoutUser(state, action);\n    case actionTypes.SET_RECIPIENT: return setRecipient(state, action);\n    case actionTypes.UNSET_RECIPIENT: return unsetRecipient(state, action);\n    case actionTypes.SET_SOCKET: return setSocket(state, action);\n    default: return state;\n  }\n}\n\nexport default reducer;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { createStore,  applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport './index.css';\nimport App from './App';\nimport reducer from './store/reducer';\n\nconst composeEnhancers = process.env.NODE_ENV === 'development'\n? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n: null;\n\nconst store = createStore(reducer,composeEnhancers(applyMiddleware(thunk)));\n\nconst app = (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n)\n\nReactDOM.render(app, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Input\":\"Input_Input__3r5Ke\",\"Label\":\"Input_Label__1qyHr\",\"LabelInvalid\":\"Input_LabelInvalid__3d-81\",\"InputElement\":\"Input_InputElement__2m88K\",\"Invalid\":\"Input_Invalid__16Mis\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Chat\":\"Chat_Chat__lgG6O\",\"UserList\":\"Chat_UserList__3Cv8B\",\"Main\":\"Chat_Main__xq6Ur\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Auth\":\"Auth_Auth__1Zul_\",\"FormArea\":\"Auth_FormArea__3l6F0\",\"Submit\":\"Auth_Submit__38lFt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__1xrSh\",\"Nav\":\"Header_Nav__3L4rV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"String\":\"ChatString_String__2TK7_\",\"Left\":\"ChatString_Left__xAFyy\",\"Right\":\"ChatString_Right__7Vx9q\"};","module.exports = __webpack_public_path__ + \"static/media/header.0c3efb58.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Submit\":\"chatSubmit_Submit__Qxdef\"};"],"sourceRoot":""}